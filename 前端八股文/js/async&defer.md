## defer
defer特性告诉浏览器不要等待脚本。相反，浏览器将继续处理HTML，构建DOM。
脚本会在后台下载，然后等DOM构建完成后，脚本才会执行

- 具有defer特性的脚本不会阻塞页面
- 具有defer特性的脚本总是要等到DOM解析完毕，但在DOMContentLoaded事件之前执行

并行下载，但是执行按照顺序。defer 特性除了告诉浏览器“不要阻塞页面”之外，还可以确保脚本执行的相对顺序。因此，即使 small.js 先加载完成，它也需要等到 long.js 执行结束才会被执行。

defer特性仅适用于外部脚本，如果script脚本没有src，则会忽略defer特性。

## async
async脚本与defer有些类似，也能够让脚本不阻塞页面，async特性意味着脚本完全独立。
- 浏览器不会因async脚本而阻塞
- 其他脚本不会等待async脚本加载完成，同样，async脚本也不会等待其他脚本
- DOMContentLoaded和异步脚本不会彼此等待

不会等待对方，谁先加载完成谁先执行，以“加载优先”的顺序执行。

当我们将独立的第三方脚本集成到页面时，此时采用异步加载方式是非常棒的：计数器，广告等，因为它们不依赖于我们的脚本，我们的脚本也不应该等待它们：

## 动态脚本
当脚本被附加到文档 (*) 时，脚本就会立即开始加载。默认情况下，动态脚本的行为是“异步”的。

也就是说：
- 它们不会等待任何东西，也没有什么东西会等它们。
- 先加载完成的脚本先执行（“加载优先”顺序）。

如果我们显式地设置了 script.async=false，则可以改变这个规则。然后脚本将按照脚本在文档中的顺序执行，就像 defer 那样。



|         | 顺序                                                         | `DOMContentLoaded`                                           |
| :------ | :----------------------------------------------------------- | :----------------------------------------------------------- |
| `async` | **加载优先顺序**。脚本在文档中的顺序不重要 —— 先加载完成的先执行 | 不相关。可能在文档加载完成前加载并执行完毕。如果脚本很小或者来自于缓存，同时文档足够长，就会发生这种情况。 |
| `defer` | **文档顺序**（它们在文档中的顺序）                           | 在文档加载和解析完成之后（如果需要，则会等待），即在 `DOMContentLoaded` 之前执行。 |

